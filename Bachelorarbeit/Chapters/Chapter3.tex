% Chapter Template

\chapter{Mapping} % Main chapter title

\label{Chapter3} % Change X to a consecutive number; for referencing this chapter elsewhere, use \ref{ChapterX}

%----------------------------------------------------------------------------------------
%	SECTION 1
%----------------------------------------------------------------------------------------
Das folgende Kapitel soll erläutern wie sich beliebige BPMN Diagramme am besten auf ACP Formeln mappen lassen. Es gbt einige unterschiedliche möglichkeiten dieses Mapping durchzuführen. Hier soll erläutert werden wie sich unser Programm verhalten soll und das eine angebrachte lösung darstellt.
\section{Parallelen und Unterschiede}\label{Parallelen und Unterschiede}
Hallo Im nun folgenden Abschnitt wollen wir zunächst einige parallelen und Unterschiede zwischen BPMN und ACP betrachten. Es ist wichtig anzumerken, dass für ein beliebiges BPMN Diagramm mehrere Formeln in ACP existieren welche den selben Inhalt darstellen. Hier soll beschrieben werden, wie sich das von uns entwickelte Programm verhalten soll.\\
Da sowohl die Moddelierungssprache BPMN als auch die Prozessalgebra ACP genutzt werden um auf unterschliedliche Art Prozesse darzustellen, finden sich zwischen den beiden viele Parallelen. Die von uns betrachtete Teilmenge von BPMN bietet sehr gute Möglichkeiten ein Mapping durchzuführen. Einige wichtige Aspekte wurden bereits im Abschnitt 2.2 genannt. Die Tasks aus BPMN können als Aktivitäten in ACP angesehen werden. Beispielsweise könnte also der Prozess aus Abbildung 2.1 beschrieben werden durch $P:=AnmeldedatenEingeben.$ Die Konkatenation von unterschiedlichen Tasks durch die sequence flows können in ACP auch einfach durch den *-Operator dargestellt werden. Auch die Aufspaltung der Diagramme durch die Gateways kann in ACP leicht umgesetzt werden. Der +-Operator und der ||-Operator bieten ein Äquivalent zu den Exclusiven und Parallelen Gateways. Ebenso leicht lassen sich auch Sub-Prozesse umsetzen. Wenn ein Subprozess in einem BPMN Diagramm vorkommt, kann der entsprechende Prozess in ACP den Subprozess wie eine Aktivität behandeln. Im Anschluss muss dann zusätzlich der Subprozess nach ACP überführt werden.
Die ersten Komplikationen treten auf bei dem betrachten von Events. In ACP gibt es keine Möglichkeit den Prozess aufzuhalten bis ein Ereignis auftritt. In der hier verwendeten Teilmenge, kann diese Problematik allerdings recht leicht umgangen werden. Einige Objekte wie pools und lanes werden von uns nicht verwenden. Zusätzlich werden auch werfende Events nicht genauer betrachtet. Dadurch ist es ohne größere Konsequenzen möglich, Events genauso wie Tasks zu behandeln und auf die Aktivitäten zu mappen. Da keine werfenden Events auftreten, können die fangenden Events nur von außerhalb des Prozesses getriggert werden. Dadurch ist es möglich das Event durch eine Aktivität zu beschreiben welche Terminiert, sobald das Ereignis auftritt. Startevents und Endevents können genauso durch aktivitäten beschrieben werden wie intermediate Events. \\
Hierbei ist anzumerken, dass die Formeln in ACP schnell unübersichtlich werden. Desshalb wollen wir durch das Mapping den Prozess in BPMN in eine Menge von Prozessen und Subprozessen in ACP aufteilen. In Kapitel 4 wird sich zusätzlich zeigen, dass das aufspalten eines Prozesses in mehrere Subprozesse die Implementierung des Mappings deutlich vereinfacht.\\
\section {Aufspaltung in Subprozesse}\label{Aufspaltung in Subprozesse}
Im folgenden Abschnitt wollen wir nun genauer betrachten an welchen Stellen ein Prozess am Sinnvollsten aufgespalten werden kann. Zusätzlich müssen noch einige Annahmen und Einschränkungen über die beiden Arten von Gateways gemacht werden.\\
Im folgenden werden Tasks und Events gleichgesetzt behandelt und es wird nicht mehr zwischen den beiden unterschieden. Beide Elemente werden nur als Aktivitäten benannt. Folgt auf eine gewöhnlich Aktivität genau eine weitere Aktivität, so wird in ACP kein Subprozess erstellt. Es wird eine einfache Konkatenation der beiden Aktivitäten dem Prozess hinzugefügt. Tritt also kein Gateway in dem Prozessdiagramm auf, so wird der Prozess in ACP auch nicht aufgespalten.Tritt aber eine Aufspaltung auf, so werden Subprozesse erstellt.\\
Ein Subprozess wird in unserem Fall für jeden ausgehenden sequence flow von jedem im Diagramm vorkommenden Gateway erstellt. Zuerst wollen wir das Exclusive Gateway näher betrachten. Jeder Prozess listet alle Aktivitäten auf, bis das er auf ein Gateway stößt. An dem Gateway selbst wird ein neuer Prozess für jeden ausgehenden sequence Flow erstellt und im Anschluss nicht mehr weitergearbeitet. Betrachten wir das Beispiel in Abbildung x. Hier ist ein einfacher Prozess mit einem Exclusiven Gateway zu sehen. Unser Programm soll hier zunächst einen Prozess P0 erstellen, dieser beinhaltet alle Aktivitäten bis zu dem Gateway. An dieser Stelle sollen für die Sequenceflows die das Gateway verlassen neue Subprozesse, P1 und P2, erstellt werden und auch diese sollen alle Aktivitäten bis zum nächsten Gateway beinhalten. Im Anschluss sollen beide Subprozesse auf einen weiteren Subprozess, P3 verweisen. Die Lösung die wir erstellen wollen lautet also:\\
\begin{itemize}
\item P0:=s*a1*(P1+P2)
\item P1:=a2*a3*P3
\item P2:=a4*P3
\item P3:=f
\end{itemize}
Es ist zu sehen, dass für jeden ausgehenden seqeunce Flow von jedem Gateway ein neuer Subprozess erstellt wurde.\\ 
Ebenso ist an dem zusammenführenden Gateway zu erkennen, dass auch hier für den ausgehenden Sequenceflow ein neuer Subprozess erstellt wurde. Hier kann nicht einfach eine Konkatenation verwendet werden. Zum einen wird die Formel bei anderen ansätzen leicht unübersichtlich, da sowohl in P1 als auch in P2 enthalten sein muss wie sich der Prozess nach dem Gateway verhält. Zum anderen hilft das erstellen von Subprozessen bei der Umsetzung von Rückkopplungen und Rekusrionen.\\
Bei den Parallelen Gateways müssen wir zunächst einige einschränkungen machen. Einige verzweigungen die bei den Exclusiven Gateways genutzt werden, dürfen bei den Parallelen Gateways nicht vorkommen.\\
Liegt ein Paralleler Block vor, so darf kein Sequenceflow den Bereich dieses Blockes verlassen. Loops und Rekursionen dürfen innherhalb dieses Blockes zwar auftreten, aber kein Sequenceflow darf den Bereich zwischen dem aufspaltenden und zusammenführenden Gateway verlassen. Dies muss bei der Modderlierung der Diagramme beachtet werden.\\
Tritt nun ein Paralleles Gateway auf, so werden auch hier neue Subprozesse für jeden Sequenceflow, welcher das Gateway verlässt erstellt. Trifft das Programm nun auf ein zusammenführendes paralleles Gateway, so soll das Mapping sich allerdings anders verhalten, als bei den exklusiven Gateways. Bei Exklusiven Gateways wird der auf das zusammenführende Gateway folgende Prozess in jenen Prozessen aufgerufen, welche auf das zusammenführende Gateway treffen. Bei parallelen Gateway allerdings, soll der folgende Prozess in dem Prozess aufgerufen werden, welcher auf das korrespondierende aufspaltende Gateway trifft. Die dient dem Zweck zu vermeiden, dass der auf das zusammenführende Gateway folgende Prozess doppelt aufgerufen wird.\\
Hierzu ist ein Beispiel in Abbildung x.x zu sehen. Hier wird das Diagramm an zwei stellen mit hilfe von parallelen Gateways aufgespalten. Hier ist leicht zu erkennen welche Gateways jeweils zusammengehören. Die Lösung, die unser Programm also liefern soll lautet:\\
\begin{itemize}
\item P0:=s*(P1||P2)*P6
\item P1:=a1*a2
\item P2:=a3*(P3||P4)*P5
\item P3:=a4
\item P4:=a5
\item P5:=a6
\item P6:=f
\end{itemize}




